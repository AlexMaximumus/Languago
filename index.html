<!DOCTYPE html>
<html>
<head>
    <title>Êó•Êú¨Ë™û Study</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            color: var(--tg-theme-text-color);
            background: var(--tg-theme-bg-color);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            padding: 20px 0;
        }

        .category-card {
            background: var(--tg-theme-secondary-bg-color);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .category-card:hover {
            transform: translateY(-5px);
        }

        .category-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .category-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .category-count {
            color: var(--tg-theme-hint-color);
            font-size: 14px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–ª–∏–ø-–∫–∞—Ä—Ç–æ—á–µ–∫ */
        .flashcard {
            perspective: 1000px;
            height: 300px;
            margin: 20px auto;
            max-width: 500px;
            cursor: pointer;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            border-radius: 20px;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: var(--tg-theme-secondary-bg-color);
            border-radius: 20px;
            padding: 20px;
            box-sizing: border-box;
        }

        .flashcard-back {
            transform: rotateY(180deg);
        }

        .kanji {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .furigana {
            font-size: 24px;
            color: var(--tg-theme-hint-color);
        }

        .meaning {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .romaji {
            font-size: 24px;
            color: var(--tg-theme-hint-color);
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .back-button {
            display: none;
            background: none;
            border: none;
            color: var(--tg-theme-link-color);
            padding: 10px 0;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .nav-button {
            background: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            border: none;
            padding: 12px 25px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
        }

        .progress {
            text-align: center;
            margin-top: 15px;
            color: var(--tg-theme-hint-color);
        }

        #flashcards-container {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="back-button" onclick="showCategories()">‚Üê –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</button>
        
        <div class="header">
            <h1>Êó•Êú¨Ë™û Study</h1>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</p>
        </div>

        <div id="categories-container" class="categories-grid">
            <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>

        <div id="flashcards-container">
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // –î–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –∫–∞—Ä—Ç–æ—á–µ–∫
        const categories = {
            numbers: {
                title: "–ß–∏—Å–ª–∞",
                icon: "üî¢",
                cards: [
                    {
                        kanji: "‰∏Ä",
                        furigana: "„ÅÑ„Å°",
                        romaji: "ichi",
                        meaning: "–û–¥–∏–Ω"
                    },
                    {
                        kanji: "‰∫å",
                        furigana: "„Å´",
                        romaji: "ni",
                        meaning: "–î–≤–∞"
                    },
                    {
                        kanji: "‰∏â",
                        furigana: "„Åï„Çì",
                        romaji: "san",
                        meaning: "–¢—Ä–∏"
                    },
                    {
                        kanji: "Âõõ",
                        furigana: "„Åó / „Çà„Çì",
                        romaji: "shi / yon",
                        meaning: "–ß–µ—Ç—ã—Ä–µ"
                    }
                ]
            },
            greetings: {
                title: "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è",
                icon: "üëã",
                cards: [
                    {
                        kanji: "„Åì„Çì„Å´„Å°„ÅØ",
                        furigana: "„Åì„Çì„Å´„Å°„ÅØ",
                        romaji: "konnichiwa",
                        meaning: "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ"
                    },
                    {
                        kanji: "„Åï„Çà„ÅÜ„Å™„Çâ",
                        furigana: "„Åï„Çà„ÅÜ„Å™„Çâ",
                        romaji: "sayounara",
                        meaning: "–î–æ —Å–≤–∏–¥–∞–Ω–∏—è"
                    }
                ]
            },
            // –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∑–¥–µ—Å—å
        };

        let currentCategory = null;
        let currentCardIndex = 0;

        // –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function showCategories() {
            document.querySelector('.back-button').style.display = 'none';
            document.querySelector('.header p').textContent = '–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è';
            document.getElementById('categories-container').style.display = 'grid';
            document.getElementById('flashcards-container').style.display = 'none';
            currentCategory = null;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function showCategory(categoryId) {
            currentCategory = categoryId;
            currentCardIndex = 0;
            
            document.querySelector('.back-button').style.display = 'block';
            document.querySelector('.header p').textContent = `–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${categories[categoryId].title}`;
            document.getElementById('categories-container').style.display = 'none';
            document.getElementById('flashcards-container').style.display = 'block';
            
            updateCard();
        }

        // –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–∞—Ä—Ç–æ—á–∫—É
        function updateCard() {
            const category = categories[currentCategory];
            const card = category.cards[currentCardIndex];
            
            const container = document.getElementById('flashcards-container');
            container.innerHTML = `
                <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <div class="kanji">${card.kanji}</div>
                            <div class="furigana">${card.furigana}</div>
                        </div>
                        <div class="flashcard-back">
                            <div class="meaning">${card.meaning}</div>
                            <div class="romaji">${card.romaji}</div>
                        </div>
                    </div>
                </div>
                <div class="navigation">
                    <button class="nav-button" onclick="previousCard()">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="nav-button" onclick="nextCard()">–í–ø–µ—Ä—ë–¥ ‚Üí</button>
                </div>
                <div class="progress">
                    –ö–∞—Ä—Ç–æ—á–∫–∞ ${currentCardIndex + 1} –∏–∑ ${category.cards.length}
                </div>
            `;
        }

        // –ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
        function flipCard(card) {
            card.classList.toggle('flipped');
        }

        // –°–ª–µ–¥—É—é—â–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
        function nextCard() {
            const category = categories[currentCategory];
            currentCardIndex = (currentCardIndex + 1) % category.cards.length;
            updateCard();
        }

        // –ü—Ä–µ–¥—ã–¥—É—â–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
        function previousCard() {
            const category = categories[currentCategory];
            currentCardIndex = (currentCardIndex - 1 + category.cards.length) % category.cards.length;
            updateCard();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        function initCategories() {
            const container = document.getElementById('categories-container');
            
            for (const [id, category] of Object.entries(categories)) {
                const categoryElement = document.createElement('div');
                categoryElement.className = 'category-card';
                categoryElement.onclick = () => showCategory(id);
                
                categoryElement.innerHTML = `
                    <div class="category-icon">${category.icon}</div>
                    <div class="category-title">${category.title}</div>
                    <div class="category-count">${category.cards.length} —Å–ª–æ–≤</div>
                `;
                
                container.appendChild(categoryElement);
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            tg.ready();
            initCategories();
        });
    </script>
</body>
</html>
